# Generated by Chef for <%= @node[:fqdn] %>.
# Local modifications will be overwritten.

CREATE DATABASE IF NOT EXISTS <%= @database %>;

GRANT ALTER, CREATE, CREATE TEMPORARY TABLES, DELETE, DROP, INDEX, INSERT, SELECT, UPDATE 
  ON <%= @database %>.* TO '<%= @user %>'@'<%= @host %>' IDENTIFIED BY '<%= @password %>';

GRANT ALTER, CREATE, CREATE TEMPORARY TABLES, DELETE, DROP, INDEX, INSERT, SELECT, UPDATE 
  ON <%= @database %>.* TO '<%= @user %>_readonly'@'<%= @host %>' IDENTIFIED BY '<%= @password %>';

GRANT REPLICATION SLAVE ON *.* TO 'slave'@'<%= @host %>' IDENTIFIED BY '<%= @password %>';

# Set the server root password. This should be preseeded by the package installation.
SET PASSWORD FOR 'root'@'localhost' = PASSWORD('<%= @root_password %>');